16 roadmap

game.c
    game edit menu, also set to play
    goes before map edit in SELECT route.  
    press START to play
        warn if map is not saved

chiptune.c:
    add more player(s) for sfx,
    or requisition players 2,3 for sfx...

run.c:
    tile translation
    hide sprites which are completely set inside another block with zero velocity.
        - compute a "hidden" property (set z=0 to hide) when transitioning to run mode
        - reset when going to map mode (always z=1 or higher)
        BUG HERE, not sure why not everything is hiding
    
    sprites:
        run sprite commands
        sprite frame animation (when to loop, probably should be based on velocity?)

sprite pattern commands:  no loops are possible, march through commands

    end/wait (end if argument is 0, wait quadratically)
        wait = argument + argument*argument/4 (or something like that)
    
    look for closest player, change direction based on argument

    handle player special input (1 bit for player 1, 2=jump, 4=run, 8=fire)
    spawn other sprite (projectile) directly in front of player,
        set velocity using next 8 bits??
        
    spawn tile directly in front of player (at nearest grid point)

    set shake screen
        2 bits intensity, 2 bits duration
    make noise
        4 bits for instrument, then play random note in the instrument octave
    

allow for more than 4 unlock commands, 
    4 tied to tiles, 
    one for startup / level initialization, 
    one for game loop, (constantly running)
    one for win,
    one for dead,

unlock pattern commands:
    wait
    set letter box -- add black lines above/below the play field
    set letter box delta
    set spawn location x, y (needs 14 bits total for both x,y)
    spawn sprite
    spawn tile (this can also destroy a tile if you spawn an "air" tile)
    randomize command
    set spawn location to player location (2 bits for offset in each direction)
    set spawn location delta x, y
    shake screen
    make noise
    set game-type (platformer, top-down adventure, shmup)
        for platformers, set strength of gravity 

sprite drawing:
    try blitting to a u4 buffer, then drawing to draw_buffer as u32,
    using u32 words (u16 color * 2, 256 indexes in super_palette)
